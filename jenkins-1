pipeline {
    agent any
    stages {
        stage('Send Dockerfile to Ansible') {
            steps {
                sh '''
                "C:/Program Files/Git/usr/bin/scp.exe" -i /path/to/private/key Dockerfile ansible@192.168.1.10:/home/ansible/
                '''
            }
        }

        stage('Debug SCP') {
            steps {
                script {
                    // Debugging the environment and commands
                    echo "Checking if SCP is available"
                    sh 'which scp'  // or 'where scp' on Windows
                    sh 'scp -V'    // Check SCP version
                    sh 'ls -l'     // Ensure Dockerfile exists in the workspace
                }
            }
        }
    }
}
